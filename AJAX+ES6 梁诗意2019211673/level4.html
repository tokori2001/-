<!--
 * @Author: your name
 * @Date: 2021-12-12 17:58:15
 * @LastEditTime: 2021-12-12 18:38:59
 * @LastEditors: Please set LastEditors
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \nodejs\test\level4.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level4</title>
    <style>
        .serch{
            height: 400px;
            display: flex;
           

        }
        .serch>.li{
            width: 140px;
            height: 188px;
            margin-top:0 ;
            text-align: left;
            margin: 10px;
            list-style:none
            
        }
        .li img{
            width: 100%;
            height: 100%;
        }
        p{
            font-size: 13px;
        }
    </style>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        window.onload = function () {
            function pms(url) {
                return new Promise(function (resolve, reject) {                 
                            $.ajax({
                                type: "GET",
                                url: url,
                                dataType: 'json',
                                contentType: 'application/json',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                xhrFields: {
                                    withCredentials: true
                                },

                                success: function (data) {
                                    data=data.result;
                                    resolve(data);
                                },
                                error:function(){
                                    reject(data.status)
                                }
                            })                  
                })
            }
            pms("http://cloud-music.pl-fe.cn/personalized?limit=10").then(data=>{
                const li=document.getElementsByClassName('li')
                for(var i=0;i<10;i++){
                var a_i="<div class='a'><img src='"+data[i].picUrl+"'><p>"+data[i].name+"</p></div>"
                $(a_i).appendTo(li[i])
                }
            })

        }
    </script>
</head>

<body>
    <ul class='serch'>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
        <li class='li'></li>
    </ul>
</body>

</html>